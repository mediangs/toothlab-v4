<!--view-source:http://x3dom.org/x3dom/example/x3dom_x3dElementCSSIntegration.html -->
<div id="main">
  <md-card *ngIf="!zoomed" id="title">
    <md-card-header>
      <md-card-title>{{specimen.title}}</md-card-title>
    </md-card-header>
    <md-card-content>
      <div *ngIf="isSectionDataLoaded">
        {{specimen.location}}<br>
        {{specimen.description}}<br>
      </div>
      <div *ngIf="!isSectionDataLoaded">
        <h3>Loading data...</h3>
        <md-progress-spinner
          color="primary"
          mode="indeterminate">
        </md-progress-spinner>
      </div>
    </md-card-content>
  </md-card>

  <x3d id="x3d-container" showProgress='true' showStat='false' showLog='false'
       [class.x3d-unzoom]="!zoomed" [class.x3d-zoom]="zoomed">
    <ul id="tools">
      <li>
        <button md-button id="zoom-button" (click)="toggleZoom()">{{zoomText}}</button>
      </li>
      <li>
        <button md-button
                [disabled] = "!isSectionDataLoaded"
                (click)="sectionInfoDialog()">
          Section Info
        </button>
      </li>

      <li>
        <button md-button
                (click)="helpDialog()">
          Help
        </button>
      </li>
    </ul>

    <md-tab-group *ngIf="!zoomed" dynamicHeight="true" id="tab-group">
      <md-tab label="3D Models">
        <ul id="x3d-list">
          <li *ngFor="let x3d of specimen.x3dModels">
            <md-checkbox
              class="items"
              color="primary"
              [(ngModel)]="x3d.visible">
              <i class="material-icons"
                 style="vertical-align: middle;"
                 [style.color]="x3d.color">label</i>
              {{x3d.description}}
            </md-checkbox>
          </li>
        </ul>
      </md-tab>
      <md-tab label="Sections">
        <app-view-config
          *ngIf="!zoomed && isSectionDataLoaded && cmpKeys"
          [cmpKeys]="cmpKeys">
        </app-view-config>
      </md-tab>
    </md-tab-group>

    <div id="section-slider">
      <md-slider #value
                 vertical="true"
                 [(ngModel)]="selectedSection"
                 [disabled] = "!isSectionDataLoaded"
                 [max]="sliderAttr['max']"
                 [min]="sliderAttr['min']"
                 [step]="sliderAttr['step']"
                 [thumb-label]="true"
                 (input)="dataService.setActiveSection(value.value)"
      ></md-slider>
      {{selectedSection | number:'.1'}}mm
    </div>

    <scene pickMode="texCoord">
      <Viewpoint position="-20.96177 -3.05639 1.59837" orientation="-0.50839 -0.58356 0.63325 2.14580"
                 zNear="0.24115" zFar="100.00000" description=""></Viewpoint>
      <!-- Viewpoint position="-20.96177 -3.05639 1.59837" orientation="-0.50839 -0.58356 0.63325 2.14580"
                 zNear="9.24115" zFar="100.00000" description=""></Viewpoint-->

      <!-- Viewpoint position="24.58412 2.30883 0.28578"
                 orientation="-0.61420 0.54921 -0.56668 2.04426"
                 zNear="0" zFar="100" description=""></Viewpoint -->

      <Transform translation="-4 -6 -8">
        <Group *ngFor="let x3d of specimen.x3dModels">
          <Inline *ngIf = "x3d.visible" [attr.nameSpaceName]='x3d.name' mapDEFToID="true"
                  [attr.url]='specimen.path+x3d.name+".x3d"'></Inline>
        </Group>
        <Group *ngFor="let key of coordInfo | keys">
          <shape>
            <IndexedLineSet [attr.coordIndex]='coordInfo[key].coordIndex'>
              <Coordinate [attr.point]='coordInfo[key].coordPoints'></Coordinate>
              <Color [attr.color]='coordInfo[key].coordColor'></Color>
            </IndexedLineSet>
          </shape>
        </Group>
      </Transform>
    </scene>
  </x3d>
</div>
<br>
<div *ngIf="!zoomed">
  <app-specimen-chart [specimenId]="specimenId"></app-specimen-chart>
</div>


<!--div>
  <button (click)="reload()">Reload</button>
  <button (click)="gotoAnatomy()">Back</button>
</div -->
